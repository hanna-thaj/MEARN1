"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var n;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _regeneratorRuntime(){_regeneratorRuntime=function(){return a};var a={},e=Object.prototype,l=e.hasOwnProperty,c=Object.defineProperty||function(e,t,n){e[t]=n.value},t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",o=t.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o,i,a,s,t=t&&t.prototype instanceof d?t:d,t=Object.create(t.prototype),r=new _(r||[]);return c(t,"_invoke",{value:(o=e,i=n,a=r,s="suspendedStart",function(e,t){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===e)throw t;return S()}for(a.method=e,a.arg=t;;){var n=a.delegate;if(n){n=function e(t,n){var r=n.method,o=t.iterator[r];if(void 0===o)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=void 0,e(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;r=u(o,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,h;o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,h):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}(n,a);if(n){if(n===h)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw s="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s="executing";n=u(o,i,a);if("normal"===n.type){if(s=a.done?"completed":"suspendedYield",n.arg===h)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(s="completed",a.method="throw",a.arg=n.arg)}})}),t}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var h={};function d(){}function f(){}function p(){}var t={},m=(i(t,r,function(){return this}),Object.getPrototypeOf),m=m&&m(m(k([]))),y=(m&&m!==e&&l.call(m,r)&&(t=m),p.prototype=d.prototype=Object.create(t));function v(e){["next","throw","return"].forEach(function(t){i(e,t,function(e){return this._invoke(t,e)})})}function g(a,s){var t;c(this,"_invoke",{value:function(n,r){function e(){return new s(function(e,t){!function t(e,n,r,o){var i,e=u(a[e],a,n);if("throw"!==e.type)return(n=(i=e.arg).value)&&"object"==_typeof(n)&&l.call(n,"__await")?s.resolve(n.__await).then(function(e){t("next",e,r,o)},function(e){t("throw",e,r,o)}):s.resolve(n).then(function(e){i.value=e,r(i)},function(e){return t("throw",e,r,o)});o(e.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}})}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function b(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function k(t){if(t){var n,e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return n=-1,(e=function e(){for(;++n<t.length;)if(l.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e}).next=e}return{next:S}}function S(){return{value:void 0,done:!0}}return c(y,"constructor",{value:f.prototype=p,configurable:!0}),c(p,"constructor",{value:f,configurable:!0}),f.displayName=i(p,o,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,o,"GeneratorFunction")),e.prototype=Object.create(y),e},a.awrap=function(e){return{__await:e}},v(g.prototype),i(g.prototype,n,function(){return this}),a.AsyncIterator=g,a.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var i=new g(s(e,t,n,r),o);return a.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},v(y),i(y,o,"Generator"),i(y,r,function(){return this}),i(y,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,n=Object(e),r=[];for(t in n)r.push(t);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=k,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=void 0),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=l.call(o,"catchLoc"),s=l.call(o,"finallyLoc");if(a&&s){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&l.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var i=(o=o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc?null:o)?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),b(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,r,o=this.tryEntries[t];if(o.tryLoc===e)return"throw"===(n=o.completion).type&&(r=n.arg,b(o)),r}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},a}function asyncGeneratorStep(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function _asyncToGenerator(s){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=s.apply(e,a);function o(e){asyncGeneratorStep(r,t,n,o,i,"next",e)}function i(e){asyncGeneratorStep(r,t,n,o,i,"throw",e)}o(void 0)})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_toPropertyKey(r.key),r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(n){var r=_isNativeReflectConstruct();return function(){var e,t=_getPrototypeOf(n);return _possibleConstructorReturn(this,r?(e=_getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}!function(){var a=window.Component,s=document.createElement("template"),e=(s.innerHTML='\n    <style>\n      :host {\n        display: block;\n        width: 100%;\n      }\n      \n      :host([hidden]) { display: none }\n\n      :host * { box-sizing: border-box; }\n    </style>\n\n    <slot name="search-controls"></slot>\n    <slot name="search-results"></slot>\n  ',function(){_inherits(i,a);var e,t,n,r,o=_createSuper(i);function i(){var e;return _classCallCheck(this,i),(e=o.call(this)).dom={wcMobileSearchAlgolia:document.querySelector("mobile-search-algolia"),wcSearchAlgoliaControls:document.querySelector("search-algolia-controls"),wcSearchAlgoliaResults:document.querySelector("search-algolia-results")},e}return _createClass(i,[{key:"template",value:function(){return s}},{key:"connectedCallback",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function e(){var t;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.elementsDefined(["mobile-search-algolia","search-algolia-controls","search-algolia-results"]);case 2:return this.initBool(["hidden"]),t=RottenTomatoes.thirdParty.algoliaSearch,e.next=6,this._retrieveTokenHash();case 6:this.tokenHash=e.sent,this.algoliaSearchClient=window.algoliasearch(t.aId,t.sId,{headers:{"X-Algolia-UserToken":this.tokenHash}}),this.algoliaInsightInitAttempted=!1,this._initAlgoliaInsights(t.aId,t.sId),this._isMobile&&this._initMobileSearch(),this.ready();case 12:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"_initAlgoliaInsights",value:function(e,t){var n=this;if(!window.aa&&!this.algoliaInsightInitAttempted)return setTimeout(function(){n._initAlgoliaInsights(e,t),n.algoliaInsightInitAttempted=!0},5e3);window.aa("init",{appId:e,apiKey:t}),window.aa("setUserToken",this.tokenHash)}},{key:"_generateUUID",value:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})}},{key:"_getCookie",value:function(e){return e&&2===(e="; ".concat(window.document.cookie).split("; ".concat(e,"="))).length?e.pop().split(";").shift():void 0}},{key:"_initMobileSearch",value:function(){this.dom.wcMobileSearchAlgolia.setControls(this.dom.wcSearchAlgoliaControls),this.dom.wcMobileSearchAlgolia.appendChild(this.dom.wcSearchAlgoliaResults)}},{key:"_setCookie",value:function(e,t,n){var r,o;e&&(r="",n&&((o=new Date).setTime(o.getTime()+24*n*60*60*1e3),r="; expires="+o.toUTCString()),document.cookie=e+"="+(t||"")+r+"; path=/; secure; SameSite=Strict")}},{key:"_hashToken",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function e(t){var n,r;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new TextEncoder,n=n.encode(t),e.next=4,crypto.subtle.digest("SHA-256",n);case 4:return n=e.sent,r=Array.from(new Uint8Array(n)),e.abrupt("return",r.map(function(e){return e.toString(16).padStart(2,"0")}).join(""));case 7:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})},{key:"_retrieveTokenHash",value:(t=_asyncToGenerator(_regeneratorRuntime().mark(function e(){var t;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this._getCookie("algoliaUT"))||(t=this._generateUUID(),this._setCookie("algoliaUT",t)),e.abrupt("return",this._hashToken(t));case 3:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"_attributeSearchterm",value:function(e){e?this.getSearchResults(e):(this.dom.wcSearchAlgoliaResults.searchterm="",this.dom.wcSearchAlgoliaResults.hidden=!0)}},{key:"getSearchResults",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function e(){var t,n,r,o,i,a=arguments;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=0<a.length&&void 0!==a[0]?a[0]:"")||t.length<3)return e.abrupt("return",!1);e.next=3;break;case 3:return n=[{indexName:"content_rt",query:t,params:{filters:"".concat(n="isEmsSearchable = 1"),hitsPerPage:5,analyticsTags:["header_search"],clickAnalytics:!0}},{indexName:"people_rt",query:t,params:{filters:"".concat(n),hitsPerPage:5,analyticsTags:["header_search"],clickAnalytics:!0}}],e.prev=5,e.next=8,this.algoliaSearchClient.multipleQueries(n);case 8:n=e.sent,r=n.results,o=!!r.filter(function(e){return 0<e.hits.length}).length,(i=this.searchterm).length?(this.dom.wcSearchAlgoliaResults.searchterm=i,this.dom.wcSearchAlgoliaResults.hidden=!0):this.dom.wcSearchAlgoliaResults.hidden=!1,o?(i=this.modelResults(r),this.dom.wcSearchAlgoliaResults.renderSearchResults(i)):this.dom.wcSearchAlgoliaResults.renderNoSearchResults(),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(5),this.dom.wcSearchAlgoliaResults.renderNoSearchResults(),this.dom.wcSearchAlgoliaResults.hidden=!1;case 21:case"end":return e.stop()}},e,this,[[5,16]])})),function(){return e.apply(this,arguments)})},{key:"isMobile",value:function(e){return null!==e}},{key:"modelResults",value:function(){var t=this,e=_slicedToArray(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],2),n=e[0],r=void 0===n?{}:n,n=e[1],o=void 0===n?{}:n,e=window.__RT__.getNamespace(r,"hits",[]),n=window.__RT__.getNamespace(o,"hits",[]);return e.forEach(function(e){e.queryID=r.queryID,e.tokenHash=t.tokenHash,e.indexName="content_rt"}),n.forEach(function(e){e.queryID=o.queryID,e.tokenHash=t.tokenHash,e.indexName="people_rt"}),{contentList:e,celebrityList:n}}}],[{key:"observedAttributes",get:function(){return["hidden","searchterm"]}}]),i}());window.customElements.get("search-algolia")||window.customElements.define("search-algolia",e),"undefined"!=typeof module&&(module.exports=e)}(),function(){var e=window.Component,o=document.createElement("template"),t=(o.innerHTML='\n    <style>\n      :host {\n        --search-cancel-space: 15px;\n\n        display: flex;\n        width: 100%;\n        position: relative;\n        overflow: hidden;\n      }\n\n      :host([hidden]) { display: none }\n\n      .input-group {\n        flex-shrink: 0;\n        position: relative;\n        width: 100%;\n        transition: flex-shrink 0.2s ease;\n        box-sizing: border-box;\n        padding-right: var(--search-cancel-space);\n      }\n\n      :host([active]) .input-group {\n        flex-shrink: initial;\n      }\n\n      .clear-container {\n        visibility: hidden;\n        opacity: 0;\n        transition: opacity 0.2s ease, visibility 0s 0.2s linear;\n      }\n\n      .cancel-container {\n        display: flex;\n      }\n\n      .input-group:not(.empty):focus-within .clear-container {\n        visibility: visible;\n        opacity: 1;\n        transition: opacity 0.2s ease;\n      }\n\n      slot[name="search-input"]::slotted(input),\n      slot[name="search-clear"]::slotted(button),\n      slot[name="search-submit"]::slotted(a) {\n        display: inline-block;\n        border-style: none;\n        font-size: 1rem;\n      }\n\n      slot[name="search-clear"]::slotted(button),\n      slot[name="search-submit"]::slotted(a) {\n        position: absolute;\n        top: 50%;\n        transform: translateY(-50%);\n      }\n\n      slot[name="search-input"]::slotted(input) {\n        width: 100%;\n        height: 35px;\n        padding-left: 40px;\n        border-radius: 26px;\n        letter-spacing: inherit;\n        font-size: 1rem;\n        background: rgba(0,0,0,0.4);\n        color: white;\n        outline: none;\n      }\n\n      slot[name="search-submit"]::slotted(a) {\n        left: 15px;\n      }\n\n      slot[name="search-clear"]::slotted(button) {\n        right: 30px;\n        display: none;\n      }\n\n      slot[name="search-cancel"]::slotted(button) {\n        font-size: 0.875rem;\n        line-height: 0;\n        align-items: center;\n        padding-right: 15px;\n      }\n\n      @media(min-width: 768px) {\n        div { padding: 0; }\n        slot[name="search-input"]::slotted(input) { padding-right: 42px; }\n        slot[name="search-clear"]::slotted(button) { display: none; }\n        slot[name="search-submit"]::slotted(a) { right: 2px; }\n\n        .input-group {\n          padding-right: 0px;\n        }\n\n        .input-group:focus-within slot[name="search-input"]::slotted(input) {\n          box-shadow: 0 0 0 1px #2a2c32 inset, 0 0 0 2px #e3e3e6 inset;\n        }\n\n        .cancel-container {\n          display: none;\n        }\n\n        slot[name="search-clear"]::slotted(button) {\n          right: 15px;\n        }\n      }\n    </style>\n\n\t\t<div class="input-group empty">\n\t\t\t<slot name="search-input"></slot>\n      <slot name="search-submit"></slot>\n      <div class="clear-container">\n\t\t\t  <slot name="search-clear"></slot>\n      </div>\n    </div>\n    <div class="cancel-container">\n      <slot name="search-cancel"></slot>\n    </div>\n\t',function(){_inherits(r,e);var t,n=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=n.call(this)).dom={elCancelBtn:document.querySelector('button[slot="search-cancel"]'),elClearBtn:document.querySelector('button[slot="search-clear"]'),elInput:document.querySelector('input[slot="search-input"]'),elInputGroup:e.select(".input-group"),elSubmitBtn:document.querySelector('a[slot="search-submit"]'),wcSearchAlgolia:document.querySelector("search-algolia"),wcMobileSearchAlgolia:document.querySelector("mobile-search-algolia")},e}return _createClass(r,[{key:"connectedCallback",value:function(){this.initBool(["active"]),this.attachEvents([{el:document,eventType:"keydown",fn:this._onDocumentKeydown.bind(this)},{el:this.dom.elInput,eventType:"keydown",fn:this._onKeyDown.bind(this)},{el:this.dom.elInput,eventType:"input",fn:this._onInputChange.bind(this)},{el:this,eventType:"click",fn:this._onControlsClick.bind(this)},{el:this.dom.elCancelBtn,eventType:"click",fn:this._onCancelBtnClick.bind(this)},{el:this.dom.elClearBtn,eventType:"click",fn:this._onClearBtnClick.bind(this)},{el:this.dom.elSubmitBtn,eventType:"click",fn:this._onSubmitClick.bind(this)}]);var e=this._isMobile?"Search":"Search movies, TV, actors, more...";this.dom.elInput.placeholder=e}},{key:"template",value:function(){return o}},{key:"_clearSearch",value:function(){this.dom.elInput.value="",this.dom.wcSearchAlgolia.searchterm="",this.searchterm=""}},{key:"_onDocumentKeydown",value:(t=_asyncToGenerator(_regeneratorRuntime().mark(function e(t){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("/"!==t.key)return e.abrupt("return");e.next=2;break;case 2:if(["INPUT","TEXTAREA","CRITICS-SELF-SUBMISSION-FORM"].includes(document.activeElement.tagName))return e.abrupt("return");e.next=5;break;case 5:return e.next=7,new Promise(function(e){return setTimeout(e)});case 7:this.dom.elInput.focus();case 8:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"_onCancelBtnClick",value:function(){this.active=!1,this.dom.wcMobileSearchAlgolia.active=!1,this._clearSearch()}},{key:"_onClearBtnClick",value:function(){this._clearSearch()}},{key:"_onControlsClick",value:function(e){this._isMobile&&e.target!==this.dom.elCancelBtn&&(this.active=!0,this.dom.wcMobileSearchAlgolia.active=!0)}},{key:"_onInputChange",value:function(e){var t=this,n=e.target.value;this.searchterm=n,this.dom.elInputGroup.classList[n?"remove":"add"]("empty"),n?(clearTimeout(this.waitForInput),this.waitForInput=setTimeout(function(){t.dom.elSubmitBtn.href="/search/?search=".concat(encodeURIComponent(n)),t.dom.wcSearchAlgolia.searchterm=n},300)):(this.dom.elSubmitBtn.href="/search",this.dom.wcSearchAlgolia.searchterm="")}},{key:"_onKeyDown",value:function(e){var t=this.searchterm;13===e.which&&t&&window.location.replace("/search?search=".concat(encodeURIComponent(t)))}},{key:"_onSubmitClick",value:function(e){if(!this.searchterm)return e.preventDefault()}}],[{key:"observedAttributes",get:function(){return["active"]}}]),r}());window.customElements.get("search-algolia-controls")||window.customElements.define("search-algolia-controls",t)}(),function(){var e=window.Component,t=document.createElement("template"),o="Escape",i="ArrowUp",a="ArrowDown",n=(t.innerHTML='\n    <style>\n      :host { display: block; }\n      :host([hidden]) { display: none; }\n\n      aside {\n        display: block;\n        padding: 15px;\n        background-color: #FFFFFF;\n        box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);\n        z-index: 100;\n        overflow-y: scroll;\n        overflow-x: hidden;\n      }\n\n      div { text-align: right; }\n\n      @media(min-width: 768px) {\n\n        aside {\n          width: 565px;\n          position: absolute;\n          transform: translateY(5px);\n          border-radius: 6px;\n          margin-top: 0;\n          padding: 30px;\n          overflow-y: auto;\n        }\n\n      }\n    </style>\n\n    <aside class="search-results-overlay" data-qa="search-results-overlay" tabindex="0">\n      <slot name="content"></slot>\n      <slot name="celebrity"></slot>\n      <slot name="none"></slot>\n      <div>\n        <slot name="view-all">View All</slot>\n      </div>\n    </aside>\n\t',function(){_inherits(r,e);var n=_createSuper(r);function r(){_classCallCheck(this,r);var e,t=_assertThisInitialized(e=n.call(this));return e.dom={elResultsCategoryContent:document.querySelector('search-algolia-results-category[slot="content"]'),elResultsCategoryCelebrity:document.querySelector('search-algolia-results-category[slot="celebrity"]'),elResultsCategoryNone:document.querySelector('search-algolia-results-category[slot="none"]'),elResultsWrapper:e.select("aside"),get elViewAll(){return t.slotted&&t.slotted["view-all"]&&t.slotted["view-all"][0]},get elsFocusable(){return Array.from(t.querySelectorAll('a,button,[tabindex="0"]'))},wcSearchAlgolia:document.querySelector("search-algolia")},e}return _createClass(r,[{key:"connectedCallback",value:function(){this.initBool(["hidden"]),this.initSlotted(),this.setAttribute("hidden",!0)}},{key:"_attributeSearchterm",value:function(e){this.dom.elViewAll&&(this.dom.elViewAll.href="/search/?search=".concat(encodeURIComponent(e)))}},{key:"renderNoSearchResults",value:function(){this.dom.elResultsCategoryContent.render([]),this.dom.elResultsCategoryCelebrity.render([]),this.dom.elResultsCategoryNone.hidden=!1,this.dom.elViewAll.hidden=!0,this.hidden=!1}},{key:"renderSearchResults",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.contentList,t=void 0===t?[]:t,e=e.celebrityList,e=void 0===e?[]:e;if(!t&&!e)return this.renderNoSearchResults();this.dom.elResultsCategoryContent.render(t),this.dom.elResultsCategoryCelebrity.render(e),this.dom.elResultsCategoryNone.hidden=!0,this.dom.elViewAll.hidden=!1,this.hidden=!1}},{key:"template",value:function(){return t}},{key:"_attributeHidden",value:function(){var e=[{el:document,eventType:"keydown",fn:this._onKeyDown.bind(this)},{el:document,eventType:"click",fn:this._onDocumentClick.bind(this)},{el:document,eventType:"focusin",fn:this._onDocumentFocusIn.bind(this)}];if(this.hidden||this._isMobile)return this.detachAllEvents(),this._elFocusReturn&&this._elFocusReturn.focus(),this._elFocusReturn=void 0;this._elFocusReturn=document.activeElement,this.attachEvents(e)}},{key:"_onArrowUpKeyDown",value:function(e){if(e.preventDefault(),this.contains(document.activeElement))return-1===(e=this.dom.elsFocusable).indexOf(document.activeElement)?this._elFocusReturn&&this._elFocusReturn.focus():(e=e[e.indexOf(document.activeElement)-1])?void e.focus():this.dom.elResultsWrapper.focus()}},{key:"_onArrowDownKeyDown",value:function(e){return e.preventDefault(),this.contains(document.activeElement)?-1===(e=this.dom.elsFocusable).indexOf(document.activeElement)?e[0].focus():(e=e[e.indexOf(document.activeElement)+1])?void e.focus():this.hidden=!0:this.dom.elResultsWrapper.focus()}},{key:"_onDocumentClick",value:function(e){e.composedPath().includes(this)||(this.hidden=!0)}},{key:"_onDocumentFocusIn",value:function(e){this.hidden=!e.composedPath().includes(this.dom.wcSearchAlgolia)}},{key:"_onKeyDown",value:function(e){switch(e.code){case o:return this.hidden=!0;case i:return this._onArrowUpKeyDown(e);case a:return this._onArrowDownKeyDown(e)}}}],[{key:"observedAttributes",get:function(){return["hidden","searchterm"]}}]),r}());window.customElements.get("search-algolia-results")||window.customElements.define("search-algolia-results",n)}(),function(){var n=window.Component,r=document.createElement("template"),e=(r.innerHTML='\n    <style>\n      :host {\tdisplay: block; }\n      :host([hidden]) { display: none; }\n    </style>\n\n    <div class="search-results">\n      <slot name="title"></slot>\n      <slot name="results"></slot>\n    </div>\n\t',function(){_inherits(t,n);var e=_createSuper(t);function t(){return _classCallCheck(this,t),e.apply(this,arguments)}return _createClass(t,[{key:"template",value:function(){return r}},{key:"connectedCallback",value:function(){this.initBool(["hidden"]),this.hidden=!0}},{key:"mapResultsItemData",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=this.getAttribute("slot"),n=e.name||e.title||"",r=(r=e.posterImageUrl||e.profileImageUrl)?"http://resizing.flixster.com/IaXbRF4gIPh9jireK_4VCPNfdKc=/50x75/v2/".concat(r):"/assets/pizza-pie/images/poster_default.c8c896e70c3.gif",o=e.type||"",o=("movie"===o.toLowerCase()?o="m":["person","group","other"].includes(o.toLowerCase())&&(o="celebrity"),e.vanity?"/".concat(o.toLowerCase(),"/").concat(e.vanity):"/"),i=(i=e.recentTitleYear||e.releaseYear||"")&&"celebrity"!==t?"(".concat(i,")"):"",a=window.__RT__.getNamespace(e,"castCrew.cast",[]);return{category:t,name:n,thumbnailUrl:r,vanityUrl:o,year:i,cast:"movie"===e.type?a.slice(0,3).join(", "):""}}},{key:"render",value:function(e,t){var a=this,s=this.querySelector("ul");e.length?(s.innerHTML="",this.detachAllEvents(),e.forEach(function(e,t){var n=document.createElement("li"),r=document.createElement("a"),o=(a.attachEvent(r,"click",function(){window.aa&&(window.aa("convertedObjectIDsAfterSearch",{userToken:e.tokenHash,index:e.indexName,eventName:"item_click_on_search_header",queryID:e.queryID,objectIDs:[e.objectID]}),window.aa("clickedObjectIDsAfterSearch",{userToken:e.tokenHash,eventName:"item_click_on_search_header",index:e.indexName,queryID:e.queryID,objectIDs:[e.objectID],positions:[t+1]}))}),document.createElement("search-algolia-results-item")),i=a.mapResultsItemData(e);r.setAttribute("data-qa","search-results-link"),r.append(o),n.setAttribute("data-qa","search-results-item"),n.append(r),s.append(n),r.href=i.vanityUrl,o.render(i)}),this.hidden=!1):this.hidden=!0}}],[{key:"observedAttributes",get:function(){return["hidden"]}}]),t}());window.customElements.get("search-algolia-results-category")||window.customElements.define("search-algolia-results-category",e)}(),function(){var n=window.Component,r=document.createElement("template"),e=(r.innerHTML='\n    <style>\n      :host {\tdisplay: block; }\n      :host([hidden]) { display: none; }\n\n      .wrap {\n        display: flex;\n        flex-direction: row;\n        justify-content: flex-start;\n        text-decoration: none;\n      }\n\n      img {\n        min-width: 50px;\n        height: 75px;\n        border-radius: 4px;\n        margin-right: 16px;\n      }\n\n      .info {\n        display: flex;\n        flex-direction: column; \n        justify-content: center;\n      }\n\n      p {\n        margin: 0;\n        font-family: var(--fontFranklinGothic);\n        font-weight: 400;\n        font-size: 1rem;\n        line-height: 1;\n        text-align: left;\n        color: #2A2C32;\n      }\n\n      p:first-child { font-weight: 500; line-height: 1.25; }\n\n      p span {\n        font-size: inherit;\n        color: #757A84;\n        margin-left: .2em;\n      }\n\n    </style>\n\t\n    <div class="wrap">\n      <img class="thumbnail" src="" alt="" />\n      <div class="info">\n        <p class="name"></p>\n        <p class="cast"></p>\n      </div>\n    </div>\n\t',function(){_inherits(t,n);var e=_createSuper(t);function t(){return _classCallCheck(this,t),e.apply(this,arguments)}return _createClass(t,[{key:"template",value:function(){return r}},{key:"connectedCallback",value:function(){this.elThumbnail=this.shadowRoot.querySelector(".thumbnail"),this.elInfoContainer=this.shadowRoot.querySelector(".info"),this.elName=this.shadowRoot.querySelector(".name"),this.elCast=this.shadowRoot.querySelector(".cast")}},{key:"render",value:function(e){var t=e.name,n=e.thumbnailUrl,r=e.year,e=e.cast;this.elThumbnail.src=n,this.elThumbnail.alt=t,this.elName.innerHTML=t,r&&(this.elName.innerHTML="".concat(t,' <span class="year">').concat(r,"</span>")),e&&(this.elCast.innerText=e)}}]),t}());window.customElements.get("search-algolia-results-item")||window.customElements.define("search-algolia-results-item",e)}(),function(){var e=window.Component,r=document.createElement("template"),t=(r.className="mobile-search-algolia",r.innerHTML='\n    <style>\n      :host {\n        display: inline-block;\n        --overlay-offset: 0;\n      }\n\n      .overlay {\n        width: 100%;\n        position: fixed;\n        top: var(--overlay-offset);\n        bottom: 0;\n        left: 0;\n        z-index: 101;\n        overflow-y: scroll;\n        overflow-x: hidden;\n        font-size: 1rem;\n        background: rgba(0,0,0,0.5);\n        opacity: 0;\n        visibility: hidden;\n        transition: opacity 0.2s ease-in-out, visibility 0s linear 0.2s;\n      }\n\n      :host([active]) .overlay {\n        opacity: 1;\n        visibility: visible;\n        transition: opacity 0.2s ease-in-out;\n      }\n\n      :host([hidden]) { display: none }\n    </style>\n\n    <div class="overlay">\n      <slot name="search-results"></slot>\n    </div>\n  ',function(){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this)).dom={elLogo:document.querySelector('a[slot="logo"]'),elNavbar:document.querySelector(".navbar")},e}return _createClass(n,[{key:"template",value:function(){return r}},{key:"connectedCallback",value:function(){this.initBool(["active"]),this.ready()}},{key:"setControls",value:function(e){this.dom.wcSearchAlgoliaControls=e}},{key:"_attributeActive",value:function(){if(this.active)return this._setScreenActive();this._setScreenInactive()}},{key:"_setScreenActive",value:function(){this._showOverlay(),document.body.style.overflow="hidden",this.dom.elNavbar.classList.add("nav-expanded"),this.dom.elLogo.style.marginLeft="-".concat(this.dom.elLogo.offsetWidth+this.dom.elLogo.offsetLeft,"px")}},{key:"_setScreenInactive",value:function(){document.body.style.overflow=null,this.dom.elNavbar.classList.remove("nav-expanded"),this.dom.elLogo.style.marginLeft=null}},{key:"_showOverlay",value:function(){var e=this.dom.elNavbar.getBoundingClientRect(),t=e.height,e=e.top;this.style.setProperty("--overlay-offset","".concat(t+e+10,"px"))}}],[{key:"observedAttributes",get:function(){return["active"]}}]),n}());window.customElements.get("mobile-search-algolia")||window.customElements.define("mobile-search-algolia",t),"undefined"!=typeof module&&(module.exports=t)}(),function(){var n=window.Component,r=document.createElement("template"),e=(r.innerHTML='\n\t  <style>\n\t\t\t:host {\tdisplay: block; width: calc(100% - 30px); }\n\t\t\t:host([hidden]) { display: none; }\n\n\t\t\tnav {\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: row;\n\t\t\t\tjustify-content: space-between;\n\t\t\t\talign-items: center;\n\t\t\t\tmargin-top: 10px;\n\t\t\t}\n\n\t\t\tslot[name="mobile-search-logo"]::slotted(a) { width: 110px; }\n\n\t\t\tslot[name="mobile-search-close"]::slotted(button) { font-size: 1.25rem; }\n\t  </style>\n\t  \n\t  <nav>\n\t\t  <slot name="mobile-search-logo"></slot>\n\t\t  <slot name="mobile-search-close"></slot>\n\t  </nav>\n\t',function(){_inherits(t,n);var e=_createSuper(t);function t(){return _classCallCheck(this,t),e.apply(this,arguments)}return _createClass(t,[{key:"template",value:function(){return r}}]),t}());window.customElements.get("mobile-search-algolia-nav")||window.customElements.define("mobile-search-algolia-nav",e)}();